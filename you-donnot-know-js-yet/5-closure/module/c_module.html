<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>闭包应用之模块3</title>
  <link rel="stylesheet" href="../../css/code.css">
</head>
<body>
  <article>
    <h4>模块模式另一个简单但强大的用法是命名将要作为公共API返回的对象</h4>
    
    <div style="height:700px;width:800px;background-color: gray;">
      <pre>
        <code>
        var foo = (
          function CoolModule(){

          var id = "foo module";

          function identify1(){
            console.log(id);
          }

          function identify2(){
            console.log(id.toUpperCase());
          }

          function change(){
            publicAPI.identify = identify2;
          }

          function add(){
            publicAPI.name = "module instance";
          }

          function remove(){
            delete publicAPI.name;
          }

          var publicAPI = {
            identify:identify1,
            change:change,
            add:add,
            remove:remove
          }

          return publicAPI;
        }
      )();

      foo.identify();
      foo.change()    //修改模块实例属性的值
      foo.identify();

      foo.add();      //添加属性
      console.log(foo.name);

      foo.remove();      //删除属性
      console.log(foo.name);
        </code>
      </pre>
    </div>

    <p>通过在模块实例内部保留对公共API对象的内部引用，可以从内部对模块实例进行修改，包括添加、删除属性，以及修改它们的值</p>

    </article>

    <script>

      var foo = (
        function CoolModule(){

         var id = "foo module";

         function identify1(){
           console.log(id);
         }

         function identify2(){
           console.log(id.toUpperCase());
         }

         function change(){
           publicAPI.identify = identify2;
         }

         function add(){
           publicAPI.name = "module instance";
         }

         function remove(){
           delete publicAPI.name;
         }

         var publicAPI = {
          identify:identify1,
          change:change,
          add:add,
          remove:remove
        }

         return publicAPI;
       }
      )();

      foo.identify();
      foo.change()    //修改模块实例属性的值
      foo.identify();

      foo.add();      //添加属性
      console.log(foo.name);

      foo.remove();      //删除属性
      console.log(foo.name);
       
       
    </script>
</body>
</html>